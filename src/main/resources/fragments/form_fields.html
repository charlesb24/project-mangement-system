<!DOCTYPE html>
<html lang="en"  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div th:class="'form-floating ' + ${classes}" th:fragment="labelledInput (id, field, placeholder, label, type, value, classes)">
    <input class="form-control" th:id="${id}" th:type="${type}" th:field="*{__${field}__}" th:placeholder="${placeholder}" th:value="${value}" />
    <label th:for="${id}" th:text="${label}"></label>
    <p class="invalid-feedback" th:if="${#fields.hasErrors(field)}" th:errors="*{__${field}__}">
    </p>
</div>

<div th:fragment="submit (label)">
    <input class="btn btn-primary w-100 py-2" id="submit" type="submit" th:value="${label}" />
</div>

<div th:class="${classes}" th:fragment="priorityAssignment (field, currentPriority, classes)">
    <label class="form-label" for="priority">Priority</label>
    <select class="form-select" id="priority" th:field="*{__${field}__}">
        <option th:value="0" th:selected="${currentPriority <= 0 or currentPriority == null}">Low</option>
        <option th:value="1" th:selected="${currentPriority == 1}">Medium</option>
        <option th:value="2" th:selected="${currentPriority == 2}">High</option>
        <option th:value="3" th:selected="${currentPriority == 3}">Urgent</option>
    </select>
</div>

<div th:class="${classes}" th:fragment="statusAssignment (field, currentStatus, classes)">
    <label class="form-label" for="status">Priority</label>
    <select class="form-select" id="status" th:field="*{__${field}__}">
        <option th:value="0" th:selected="${currentStatus <= 0 or currentStatus == null}">Not Started</option>
        <option th:value="1" th:selected="${currentStatus == 1}">In Progress</option>
        <option th:value="2" th:selected="${currentStatus == 2}">On Hold</option>
        <option th:value="3" th:selected="${currentStatus == 3}">Cancelled</option>
        <option th:value="4" th:selected="${currentStatus == 4}">Complete</option>
    </select>
</div>

<div th:fragment="userAssignment (assignedToUserId, assignableUsers, assignedUser)">
    <label class="form-label" for="assignedTo">Assigned To</label>
    <select class="form-select" id="assignedTo" th:field="*{assignedToUserId}">
        <option th:each="user : ${assignableUsers}" th:value="${user.id}" th:text="${user?.lastName + ', ' + user?.firstName}"></option>
        <option th:if="*{assignedToUserId == 0}" th:value="${0}" selected>Unassigned</option>
        <option th:if="*{assignedToUserId != 0}" th:value="${assignedUser?.id}" th:text="${assignedUser?.lastName + ', ' + assignedUser?.firstName}" selected></option>
    </select>
</div>

<div th:fragment="contactMethod (field)">
    <span>Preferred Contact Method: </span>
    <input id="contactMethodEmail" type="radio" th:field="*{__${field}__}" value="email" th:selected="true" />
    <label for="contactMethodEmail">Email</label>
    <input id="contactMethodPhone" type="radio" th:field="*{__${field}__}" value="phone" />
    <label for="contactMethodPhone">Phone</label>
</div>

</body>
</html>